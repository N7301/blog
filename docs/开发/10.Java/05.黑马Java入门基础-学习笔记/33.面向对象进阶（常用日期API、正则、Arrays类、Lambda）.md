---
title: 面向对象进阶（常用日期API、正则、Arrays类、Lambda）
date: 2023-03-12 10:11:10
permalink: /pages/4cb625/
categories:
  - 开发
  - Java
  - 黑马Java入门基础-学习笔记
tags:
  - 
---
# 面向对象进阶（常用日期API、正则、Arrays类、Lambda）

## 1. 日期与时间

> 这部分的内容了解即可，JDK8 新增的日期类比本部分中的好用

### 1.1 Date 类

Date 类代表当前所在系统的日期时间信息

**构造器**

| 名称          | 说明                                             |
| ------------- | ------------------------------------------------ |
| public Date() | 创建一个Date对象，代表的是系统当前此刻日期时间。 |
| public Date(long time) | 把时间毫秒值转换成Date日期对象	|

**常用方法**

| 名称                  | 说明                                              |
| --------------------- | ------------------------------------------------- |
| public long getTime() | 返回从1970年1月1日   00:00:00走到此刻的总的毫秒数 |
| public void setTime(long time) | 设置日期对象的时间为当前时间毫秒值对应的时间 |

- 日期对象如何创建，如何获取时间毫秒值？

  - **public Date();**

  - **public long** **getTime**();

- 时间毫秒值怎么恢复成日期对象?

  - **public Date(long time);**

  - **public void** **setTime**(long time);

### 1.2 SimpleDateFormat

作用：

1. 完成日期时间的格式化操作

   public SimpleDateFormat(String pattern)：构造一个SimpleDateFormat，使用指定的格式

   | 格式化方法                                  | 说明                              |
   | ------------------------------------------- | --------------------------------- |
   | public final String **format(Date date)**   | 将日期格式化成日期/时间字符串     |
   | public final String **format(Object time)** | 将时间毫秒值式化成日期/时间字符串 |

2. 解析字符串时间成为日期对象

   2011-11-11 11:11:22  ->  Date日期对象

   public Date **parse(String source)**：从给定字符串的开始解析文本以生成日期

### 1.3 Calendar

- Calendar代表了系统此刻日期对应的日历对象

- Calendar是一个抽象类，不能直接创建对象

  Calendar日历类创建日历对象的方法：public static Calendar getInstance()，获取当前日历对象

- Calendar常用方法

  | 方法名                                | 说明                        |
  | ------------------------------------- | --------------------------- |
  | public int get(int field)             | 取日期中的某个字段信息。    |
  | public void set(int field,int value)  | 修改日历的某个字段信息。    |
  | public void add(int field,int amount) | 为某个字段增加/减少指定的值 |
  | public final Date getTime()           | 拿到此刻日期对象。          |
  | public long getTimeInMillis()         | 拿到此刻时间毫秒值          |

:warning: **注意：calendar是可变日期对象，一旦修改后其对象本身表示的时间将产生变化

## 2. JDK8 新增日期类

- 从Java 8开始，java.time包提供了新的日期和时间API，**主要涉及的类型有：**

  - **LocalDate**：不包含具体时间的日期。

  - **LocalTime**：不含日期的时间。
  - **LocalDateTime**：包含了日期及时间。
  - **Instant**：代表的是时间戳。
  - **DateTimeFormatter** 用于做时间的格式化和解析的
  - **Duration**:用于计算两个“时间”间隔
  - **Period**:用于计算两个“日期”间隔

- 新增的API严格区分了时刻、本地日期、本地时间，并且，对日期和时间进行运算更加方便
- 新API的类型几乎全部是不变类型（和String的使用类似），可以放心使用不必担心被修改

### 2.1 LocalDate、LocalTime、LocalDateTime

分别表示日期、时间、日期时间对象，他们的<u>类的实例是不可变的对象</u>，他们<u>三者构建对象和API都是通用的</u>

**构建对象的方式如下：**

| 方法名                    | 说明                            |                                                              |
| ------------------------- | ------------------------------- | ------------------------------------------------------------ |
| public static Xxxx now(); | 静态方法，根据当前时间创建对象  | LocaDate localDate = LocalDate.now();     LocalTime llocalTime = LocalTime.*now*();     LocalDateTime localDateTime = LocalDateTime.*now*(); |
| public static Xxxx of(…); | 静态方法，指定日期/时间创建对象 | LocalDate  localDate1 =  LocalDate.*of*(2099  ,  11,11);     LocalTime  localTime1 =  LocalTime.*of*(11, 11, 11);     LocalDateTime  localDateTime1 =  LocalDateTime.*of*(2020, 10, 6, 13, 23, 43); |

**LocalDate、LocalTime、LocalDateTime获取信息的API：**

| 方法名                          | 说明               |
| ------------------------------- | ------------------ |
| public int geYear()             | 获取年             |
| public int getMonthValue()      | 获取月份（1-12）   |
| Public int getDayOfMonth()      | 获取月中第几天乘法 |
| Public int getDayOfYear()       | 获取年中第几天     |
| Public DayOfWeek getDayOfWeek() | 获取星期           |

::: tip 

具体使用时查看 IDEA 提示的方法即可

:::

**转换相关 API：**

<img src="https://blog-1310567564.cos.ap-beijing.myqcloud.com/img/image-20230312105710540.png" alt="image-20230312105710540" style="zoom: 67%;" />



LocalDateTime的转换API：

| 方法名                         | 说明                    |
| ------------------------------ | ----------------------- |
| public LocalDate toLocalDate() | 转换成一个LocalDate对象 |
| public LocalTime toLocalTime() | 转换成一个LocalTime对象 |

**和时间修改相关的 API：**

LocalDateTime 综合了 LocalDate 和 LocalTime 里面的方法，所以下面只用 LocalDate 和 LocalTime 来举例。<u>这些方法返回的是一个新的实例引用，因为LocalDateTime 、LocalDate 、LocalTime 都是不可变的</u>

| 方法名                                             | 说明                                                         |
| -------------------------------------------------- | ------------------------------------------------------------ |
| plusDays, plusWeeks, plusMonths, plusYears         | 向当前 LocalDate 对象添加几天、 几周、几个月、几年           |
| minusDays, minusWeeks, minusMonths, minusYears     | 从当前 LocalDate 对象减去几天、 几周、几个月、几年           |
| withDayOfMonth, withDayOfYear, withMonth, withYear | 将月份天数、年份天数、月份、年 份 修 改 为 指 定 的 值 并 返 回 新  的 LocalDate 对象 |
| isBefore, isAfter, equals                          | 比较两个 LocalDate                                           |

### 2.2 Instant 时间戳

JDK8 获取时间戳特别简单，且功能更丰富。Instant 类由一个静态的工厂方法 now() 可以返回当前时间戳

```java {1,4,7}
Instant instant = Instant.now();
 System.out.println("当前时间戳是：" + instant);

 Date date = Date.from(instant);
 System.out.println("当前时间戳是：" + date);

 instant = date.toInstant();
 System.out.println(instant);
```

:bulb: 时间戳是包含日期和时间的，与 java.util.Date 很类似，事实上 Instant 就是类似 JDK8 以前的 Date。

:bulb: Instant和Date这两个类可以进行转换

### 2.3 DateTimeFormatter

在 JDK8 中，引入了一个全新的日期与时间格式器 DateTimeFormatter，<font color="#dd0000">正反都能调用format方法。</font>

示例代码：

```java {7,,14}
public class Demo06DateTimeFormat {
    public static void main(String[] args) {
        // 本地此刻  日期时间 对象
        LocalDateTime ldt = LocalDateTime.now();
        System.out.println(ldt);

        // 解析/格式化器
        DateTimeFormatter dtf = DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss EEE a");
        // 正向格式化（对象调用可以瞎搞）
        System.out.println(dtf.format(ldt));
        // 逆向格式化
        System.out.println(ldt.format(dtf));

        // 解析字符串时间
        DateTimeFormatter dtf1 = DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss");
        // 解析当前字符串时间成为本地日期时间对象
        LocalDateTime ldt1 = LocalDateTime.parse("2019-11-11 11:11:11" ,  dtf1);
        System.out.println(ldt1);
        System.out.println(ldt1.getDayOfYear());
    }
}
```

**格式化的时间形式的常用的模式对应关系如下：**

<img src="https://blog-1310567564.cos.ap-beijing.myqcloud.com/img/image-20230312111616168.png" alt="image-20230312111616168" style="zoom: 80%;" />

### 2.4 Duration/Period/ChronoUnit

JDK8 中，用来计算两个**“日期”间隔**的类：java.time.Period；用来计算两个**“时间”间隔**的类：java.time.Duration。

**最全的工具类**：java.time.temporal.ChronoUnit，可以用于比较所有的时间单位。

#### 2.4.1 Period 类

主要是 Period 类方法 getYears()，getMonths() 和 getDays() 来计算,只能精确到年月日。

用于 LocalDate 之间的比较

示例代码：

```java
public class Demo07Period {
    public static void main(String[] args) {
        // 当前本地 年月日
        LocalDate today = LocalDate.now();
        System.out.println(today);//

        // 生日的 年月日
        LocalDate birthDate = LocalDate.of(1998, 10, 13);
        System.out.println(birthDate);

        Period period = Period.between(birthDate, today);//第二个参数减第一个参数

        System.out.println(period.getYears());
        System.out.println(period.getMonths());
        System.out.println(period.getDays());
    }
}
```

#### 2.4.2 Duration 类

提供了使用基于时间的值测量时间量的方法

用于 LocalDateTime 之间的比较。也可用于 Instant 之间的比较

示例代码：

```java
public class Demo08Duration {
    public static void main(String[] args) {
        // 本地日期时间对象。
        LocalDateTime today = LocalDateTime.now();
        System.out.println(today);

        // 出生的日期时间对象
        LocalDateTime birthDate = LocalDateTime.of(2021,8,06,01,00,00);

        System.out.println(birthDate);

        Duration duration = Duration.between(today, birthDate);//第二个参数减第一个参数

        System.out.println(duration.toDays());//两个时间差的天数
        System.out.println(duration.toHours());//两个时间差的小时数
        System.out.println(duration.toMinutes());//两个时间差的分钟数
        System.out.println(duration.toMillis());//两个时间差的毫秒数
        System.out.println(duration.toNanos());//两个时间差的纳秒数
    }
}
```

#### 2.4.3 ChronoUnit 类

ChronoUnit 类可用于在单个时间单位内测量一段时间，这个工具类是最全的了，可以用于比较所有的时间单位。

示例代码：

```java
public class Demo09ChronoUnit {
    public static void main(String[] args) {
        // 本地日期时间对象：此刻的
        LocalDateTime today = LocalDateTime.now();
        System.out.println(today);

        // 生日时间
        LocalDateTime birthDate = LocalDateTime.of(1990,10,1,
                10,50,59);
        System.out.println(birthDate);

        System.out.println("相差的年数：" + ChronoUnit.YEARS.between(birthDate, today));
        System.out.println("相差的月数：" + ChronoUnit.MONTHS.between(birthDate, today));
        System.out.println("相差的周数：" + ChronoUnit.WEEKS.between(birthDate, today));
        System.out.println("相差的天数：" + ChronoUnit.DAYS.between(birthDate, today));
        System.out.println("相差的时数：" + ChronoUnit.HOURS.between(birthDate, today));
        System.out.println("相差的分数：" + ChronoUnit.MINUTES.between(birthDate, today));
        System.out.println("相差的秒数：" + ChronoUnit.SECONDS.between(birthDate, today));
        System.out.println("相差的毫秒数：" + ChronoUnit.MILLIS.between(birthDate, today));
        System.out.println("相差的微秒数：" + ChronoUnit.MICROS.between(birthDate, today));
        System.out.println("相差的纳秒数：" + ChronoUnit.NANOS.between(birthDate, today));
        System.out.println("相差的半天数：" + ChronoUnit.HALF_DAYS.between(birthDate, today));
        System.out.println("相差的十年数：" + ChronoUnit.DECADES.between(birthDate, today));
        System.out.println("相差的世纪（百年）数：" + ChronoUnit.CENTURIES.between(birthDate, today));
        System.out.println("相差的千年数：" + ChronoUnit.MILLENNIA.between(birthDate, today));
        System.out.println("相差的纪元数：" + ChronoUnit.ERAS.between(birthDate, today));
    }
}
```

## 3. 包装类

8种基本数据类型对应的引用类型

| 基本数据类型 | 引用数据类型 |
| ------------ | ------------ |
| byte         | Byte         |
| short        | Short        |
| int          | Integer      |
| long         | Long         |
| char         | Character    |
| float        | Float        |
| double       | Double       |
| boolean      | Boolean      |

:bulb:  **提供包装类的原因：** 

1. Java为了实现一切皆对象，为8种基本类型提供了对应的引用类型。
2. <font color="#dd0000">集合和泛型只支持包装类型，不支持基本数据类型</font>

包装类的特性：

**自动装箱**：基本类型的数据和变量可以直接赋值给包装类型的变量

**自动拆箱：**包装类型的变量可以直接赋值给基本数据类型的变量























