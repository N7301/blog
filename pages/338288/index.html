<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>大数据定制篇-Shell编程 | Nrich&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="icon" href="/blog/img/bitbug_favicon.ico">
    <meta name="description" content="web前端技术博客,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,React,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/blog/assets/css/0.styles.5e70c998.css" as="style"><link rel="preload" href="/blog/assets/js/app.73302609.js" as="script"><link rel="preload" href="/blog/assets/js/2.c02cd514.js" as="script"><link rel="preload" href="/blog/assets/js/52.063ad237.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.ccc2fc76.js"><link rel="prefetch" href="/blog/assets/js/11.15e920f7.js"><link rel="prefetch" href="/blog/assets/js/12.d6b747fb.js"><link rel="prefetch" href="/blog/assets/js/13.ee8d04f3.js"><link rel="prefetch" href="/blog/assets/js/14.b7513ca5.js"><link rel="prefetch" href="/blog/assets/js/15.f2e8ff40.js"><link rel="prefetch" href="/blog/assets/js/16.347a6e24.js"><link rel="prefetch" href="/blog/assets/js/17.6c1e9625.js"><link rel="prefetch" href="/blog/assets/js/18.7602b54c.js"><link rel="prefetch" href="/blog/assets/js/19.8f4fcc4b.js"><link rel="prefetch" href="/blog/assets/js/20.09885064.js"><link rel="prefetch" href="/blog/assets/js/21.b525f277.js"><link rel="prefetch" href="/blog/assets/js/22.b9ed6df2.js"><link rel="prefetch" href="/blog/assets/js/23.523e5d22.js"><link rel="prefetch" href="/blog/assets/js/24.d04239a4.js"><link rel="prefetch" href="/blog/assets/js/25.237a6c47.js"><link rel="prefetch" href="/blog/assets/js/26.6bd9bfe4.js"><link rel="prefetch" href="/blog/assets/js/27.ac60ace0.js"><link rel="prefetch" href="/blog/assets/js/28.ee14024f.js"><link rel="prefetch" href="/blog/assets/js/29.0caa2b3a.js"><link rel="prefetch" href="/blog/assets/js/3.620a1f91.js"><link rel="prefetch" href="/blog/assets/js/30.e6e7d6f8.js"><link rel="prefetch" href="/blog/assets/js/31.6ec6039c.js"><link rel="prefetch" href="/blog/assets/js/32.37f8dd2f.js"><link rel="prefetch" href="/blog/assets/js/33.7e29804a.js"><link rel="prefetch" href="/blog/assets/js/34.8eeb5b9d.js"><link rel="prefetch" href="/blog/assets/js/35.72aa34f7.js"><link rel="prefetch" href="/blog/assets/js/36.9de84a28.js"><link rel="prefetch" href="/blog/assets/js/37.64e3dd13.js"><link rel="prefetch" href="/blog/assets/js/38.99ad5507.js"><link rel="prefetch" href="/blog/assets/js/39.8cda7b61.js"><link rel="prefetch" href="/blog/assets/js/4.0df20a49.js"><link rel="prefetch" href="/blog/assets/js/40.ed6949c0.js"><link rel="prefetch" href="/blog/assets/js/41.bf343b6b.js"><link rel="prefetch" href="/blog/assets/js/42.cbbfd0d9.js"><link rel="prefetch" href="/blog/assets/js/43.39209b19.js"><link rel="prefetch" href="/blog/assets/js/44.7eec5b18.js"><link rel="prefetch" href="/blog/assets/js/45.b088db4c.js"><link rel="prefetch" href="/blog/assets/js/46.bfc9e511.js"><link rel="prefetch" href="/blog/assets/js/47.d0b2aa80.js"><link rel="prefetch" href="/blog/assets/js/48.49b8f1b4.js"><link rel="prefetch" href="/blog/assets/js/49.72f6d0a1.js"><link rel="prefetch" href="/blog/assets/js/5.94069b5e.js"><link rel="prefetch" href="/blog/assets/js/50.dcbe6aa5.js"><link rel="prefetch" href="/blog/assets/js/51.cca2da80.js"><link rel="prefetch" href="/blog/assets/js/53.65573113.js"><link rel="prefetch" href="/blog/assets/js/54.e3b86f9a.js"><link rel="prefetch" href="/blog/assets/js/55.e23d17b7.js"><link rel="prefetch" href="/blog/assets/js/56.c47badfb.js"><link rel="prefetch" href="/blog/assets/js/57.8c7d3e16.js"><link rel="prefetch" href="/blog/assets/js/58.52fb51c8.js"><link rel="prefetch" href="/blog/assets/js/59.8ee7423a.js"><link rel="prefetch" href="/blog/assets/js/6.90726693.js"><link rel="prefetch" href="/blog/assets/js/60.7c6906fd.js"><link rel="prefetch" href="/blog/assets/js/61.898384c1.js"><link rel="prefetch" href="/blog/assets/js/62.6bf3cdda.js"><link rel="prefetch" href="/blog/assets/js/63.fed7f6ff.js"><link rel="prefetch" href="/blog/assets/js/64.62128c79.js"><link rel="prefetch" href="/blog/assets/js/65.dd8213b3.js"><link rel="prefetch" href="/blog/assets/js/66.579f1a82.js"><link rel="prefetch" href="/blog/assets/js/67.fa647f5d.js"><link rel="prefetch" href="/blog/assets/js/68.d535a10d.js"><link rel="prefetch" href="/blog/assets/js/69.4d7e0d52.js"><link rel="prefetch" href="/blog/assets/js/7.ba20b3c7.js"><link rel="prefetch" href="/blog/assets/js/70.4b6cd449.js"><link rel="prefetch" href="/blog/assets/js/71.be36a223.js"><link rel="prefetch" href="/blog/assets/js/72.f57cde07.js"><link rel="prefetch" href="/blog/assets/js/73.a4087adf.js"><link rel="prefetch" href="/blog/assets/js/74.8f60ef05.js"><link rel="prefetch" href="/blog/assets/js/75.fdc945ab.js"><link rel="prefetch" href="/blog/assets/js/76.d1f1faa5.js"><link rel="prefetch" href="/blog/assets/js/77.687a6763.js"><link rel="prefetch" href="/blog/assets/js/78.97f56bb1.js"><link rel="prefetch" href="/blog/assets/js/79.35c1de5f.js"><link rel="prefetch" href="/blog/assets/js/8.2abb0131.js"><link rel="prefetch" href="/blog/assets/js/80.fbe50656.js"><link rel="prefetch" href="/blog/assets/js/81.102e33bc.js"><link rel="prefetch" href="/blog/assets/js/82.4f73285b.js"><link rel="prefetch" href="/blog/assets/js/9.ece9abdb.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.5e70c998.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/mylogo.jpeg" alt="Nrich's blog" class="logo"> <span class="site-name can-hide">Nrich's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><!----> <span class="title" style="display:;">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/java/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/blog/go/" class="nav-link">Golang</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="AI" class="dropdown-title"><!----> <span class="title" style="display:;">AI</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/deep-learning/" class="nav-link">深度学习</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><!----> <span class="title" style="display:;">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/blog/linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/blog/datastructure/" class="nav-link">DataStructure</a></li><li class="dropdown-item"><!----> <a href="/blog/cloudnative/" class="nav-link">CloudNative</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title" style="display:;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/redis/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/blog/mysql/" class="nav-link">MySQL</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络" class="dropdown-title"><!----> <span class="title" style="display:;">网络</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/route-hijack/" class="nav-link">路由劫持</a></li></ul></div></div> <a href="https://github.com/n7301/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://blog-1310567564.cos.ap-beijing.myqcloud.com/head.jpg"> <div class="blogger-info"><h3>Nrich</h3> <span>小聪明</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><!----> <span class="title" style="display:;">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/java/" class="nav-link">Java</a></li><li class="dropdown-item"><!----> <a href="/blog/go/" class="nav-link">Golang</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="AI" class="dropdown-title"><!----> <span class="title" style="display:;">AI</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/deep-learning/" class="nav-link">深度学习</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><!----> <span class="title" style="display:;">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/blog/linux/" class="nav-link">Linux</a></li><li class="dropdown-item"><!----> <a href="/blog/datastructure/" class="nav-link">DataStructure</a></li><li class="dropdown-item"><!----> <a href="/blog/cloudnative/" class="nav-link">CloudNative</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><!----> <span class="title" style="display:;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/redis/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/blog/mysql/" class="nav-link">MySQL</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="网络" class="dropdown-title"><!----> <span class="title" style="display:;">网络</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/route-hijack/" class="nav-link">路由劫持</a></li></ul></div></div> <a href="https://github.com/n7301/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Linux</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>韩顺平2021课程笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/pages/c774f5/" class="sidebar-link">Linux 基础篇</a></li><li><a href="/blog/pages/4a5b75/" class="sidebar-link">Linux实操篇（上）</a></li><li><a href="/blog/pages/16468e/" class="sidebar-link">Linux实操篇（下）</a></li><li><a href="/blog/pages/1e98d9/" class="sidebar-link">JavaEE与Python定制篇</a></li><li><a href="/blog/pages/338288/" aria-current="page" class="active sidebar-link">大数据定制篇-Shell编程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/blog/pages/338288/#_1-shell-概述" class="sidebar-link">1. Shell 概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/338288/#_1-1-为什么要学习-shell-编程" class="sidebar-link">1.1 为什么要学习 Shell 编程</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/338288/#_1-2-shell-是什么" class="sidebar-link">1.2 shell 是什么</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog/pages/338288/#_2-shell-脚本的执行方式" class="sidebar-link">2. Shell 脚本的执行方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/338288/#_2-1-脚本格式要求" class="sidebar-link">2.1 脚本格式要求</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/338288/#_2-2-编写第一个-shell-脚本" class="sidebar-link">2.2 编写第一个 shell 脚本</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/338288/#_2-3-脚本的常用执行方式" class="sidebar-link">2.3 脚本的常用执行方式</a></li><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#🖊-方式一-输入脚本的绝对路径或相对路径" class="sidebar-link">🖊 方式一：输入脚本的绝对路径或相对路径</a></li><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#🖊-方式二-sh-脚本" class="sidebar-link">🖊 方式二：sh + 脚本</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog/pages/338288/#_3-shell-的变量" class="sidebar-link">3. shell 的变量</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/338288/#_3-1-shell-变量介绍" class="sidebar-link">3.1 Shell 变量介绍</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/338288/#_3-2-shell-变量定义" class="sidebar-link">3.2 Shell 变量定义</a></li><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#基本语法" class="sidebar-link">基本语法：</a></li><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#快速入门" class="sidebar-link">快速入门：</a></li><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#补充-shell-脚本的注释" class="sidebar-link">补充：shell 脚本的注释：</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/338288/#_3-3-shell-变量的定义" class="sidebar-link">3.3 shell 变量的定义</a></li><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#定义变量的规则" class="sidebar-link">定义变量的规则：</a></li><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#将命令的返回值赋给变量" class="sidebar-link">将命令的返回值赋给变量：</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/338288/#_3-4-设置环境变量" class="sidebar-link">3.4 设置环境变量</a></li><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#基本语法-2" class="sidebar-link">基本语法：</a></li><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#快速入门-2" class="sidebar-link">快速入门：</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/338288/#_3-5-位置参数变量" class="sidebar-link">3.5 位置参数变量</a></li><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#_3-5-1-基本语法" class="sidebar-link">3.5.1 基本语法</a></li><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#_3-5-2-案例" class="sidebar-link">3.5.2 案例</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/338288/#_3-6-预定义变量" class="sidebar-link">3.6 预定义变量</a></li><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#_3-6-1-基本语法" class="sidebar-link">3.6.1 基本语法</a></li><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#_3-6-2-案例" class="sidebar-link">3.6.2 案例</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog/pages/338288/#_4-运算符" class="sidebar-link">4. 运算符</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#_4-1-基本语法" class="sidebar-link">4.1 基本语法</a></li><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#_4-2-案例" class="sidebar-link">4.2 案例</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog/pages/338288/#_5-条件判断" class="sidebar-link">5. 条件判断</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#_5-1-基本语法" class="sidebar-link">5.1 基本语法</a></li><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#_5-2-常用判断条件" class="sidebar-link">5.2 常用判断条件</a></li><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#_3-8-3-案例" class="sidebar-link">3.8.3 案例</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog/pages/338288/#_6-流程控制" class="sidebar-link">6. 流程控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/338288/#_6-1-if-判断" class="sidebar-link">6.1 if 判断</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/338288/#_6-2-case-语句" class="sidebar-link">6.2 case 语句</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/338288/#_6-3-for-循环" class="sidebar-link">6.3 for 循环</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/338288/#🖊-基本语法-1" class="sidebar-link">🖊 基本语法 1</a></li><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#🖊-基本语法-2" class="sidebar-link">🖊 基本语法 2</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/338288/#_6-4-while-循环" class="sidebar-link">6.4 while 循环</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog/pages/338288/#_7-read-读取控制台输入" class="sidebar-link">7. read 读取控制台输入</a></li><li class="sidebar-sub-header level2"><a href="/blog/pages/338288/#_8-函数" class="sidebar-link">8. 函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog/pages/338288/#_8-1-系统函数" class="sidebar-link">8.1 系统函数</a></li><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#_8-1-1-basename-函数" class="sidebar-link">8.1.1 basename 函数</a></li><li class="sidebar-sub-header level4"><a href="/blog/pages/338288/#_8-1-2-dirname-函数" class="sidebar-link">8.1.2 dirname 函数</a></li><li class="sidebar-sub-header level3"><a href="/blog/pages/338288/#_8-2-自定义函数" class="sidebar-link">8.2 自定义函数</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog/pages/338288/#_9-综合案例" class="sidebar-link">9. 综合案例</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>From公众号</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>云原生</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/blog/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/blog/categories/?category=%E5%9F%BA%E7%A1%80" title="分类" data-v-06225672>基础</a></li><li data-v-06225672><a href="/blog/categories/?category=Linux" title="分类" data-v-06225672>Linux</a></li><li data-v-06225672><a href="/blog/categories/?category=%E9%9F%A9%E9%A1%BA%E5%B9%B32021%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0" title="分类" data-v-06225672>韩顺平2021课程笔记</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/Nrich-sunny" target="_blank" title="作者" class="beLink" data-v-06225672>Nrich</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-08-21</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">大数据定制篇-Shell编程<!----></h1>  <div class="theme-vdoing-content content__default"><h2 id="_1-shell-概述"><a href="#_1-shell-概述" class="header-anchor">#</a> 1. Shell 概述</h2> <h3 id="_1-1-为什么要学习-shell-编程"><a href="#_1-1-为什么要学习-shell-编程" class="header-anchor">#</a> 1.1 为什么要学习 Shell 编程</h3> <ul><li>Linux 运维工程师在进行服务器集群管理时，需要编写 Shell 程序来进行服务器管理。</li> <li>对于 JavaEE 和 Python 程序员来说，工作的需要，会要求你编写一些 Shell 脚本进行程序或者是服务器的维护，比如编写一个定时备份数据库的脚本。</li> <li>对于大数据程序员来说，需要编写 Shell 程序来管理集群。</li></ul> <h3 id="_1-2-shell-是什么"><a href="#_1-2-shell-是什么" class="header-anchor">#</a> 1.2 shell 是什么</h3> <p>Shell 是一个<strong>命令行解释器</strong>，它为用户提供了一个向 Linux 内核发送请求以便运行程序的界面系统级程序，用户可以用 Shell 来启动、挂起、停止甚至是编写一些程序。</p> <h2 id="_2-shell-脚本的执行方式"><a href="#_2-shell-脚本的执行方式" class="header-anchor">#</a> 2. Shell 脚本的执行方式</h2> <h3 id="_2-1-脚本格式要求"><a href="#_2-1-脚本格式要求" class="header-anchor">#</a> 2.1 脚本格式要求</h3> <p>脚本以 <code>#!/bin/bash</code> 开头，需要有可执行权限。</p> <h3 id="_2-2-编写第一个-shell-脚本"><a href="#_2-2-编写第一个-shell-脚本" class="header-anchor">#</a> 2.2 编写第一个 shell 脚本</h3> <p>需求：创建一个 shell 脚本，输出 hello world！</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>vim hello.sh
#!/bin/bash
echo &quot;hello,world~&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-3-脚本的常用执行方式"><a href="#_2-3-脚本的常用执行方式" class="header-anchor">#</a> 2.3 脚本的常用执行方式</h3> <h4 id="🖊-方式一-输入脚本的绝对路径或相对路径"><a href="#🖊-方式一-输入脚本的绝对路径或相对路径" class="header-anchor">#</a> 🖊 方式一：输入脚本的绝对路径或相对路径</h4> <p>说明：首先要赋予脚本 <code>+x</code> 的权限，再执行脚本</p> <h4 id="🖊-方式二-sh-脚本"><a href="#🖊-方式二-sh-脚本" class="header-anchor">#</a> 🖊 方式二：sh + 脚本</h4> <p>说明：不用赋予脚本<code>+x</code> 权限，直接执行即可</p> <p>比如 <code>sh hello.sh</code></p> <h2 id="_3-shell-的变量"><a href="#_3-shell-的变量" class="header-anchor">#</a> 3. shell 的变量</h2> <h3 id="_3-1-shell-变量介绍"><a href="#_3-1-shell-变量介绍" class="header-anchor">#</a> 3.1 Shell 变量介绍</h3> <ul><li>Shell 变量分为<strong>系统变量</strong>和<strong>用户自定义变量</strong>。</li> <li><strong>系统变量</strong>：<code>$HOME、$PWD、$SHELL、$USER</code> 等等，比如：<code>echo $HOME</code> 等等。</li> <li>显示 shell 所有系统变量：<strong>set 指令</strong></li></ul> <h3 id="_3-2-shell-变量定义"><a href="#_3-2-shell-变量定义" class="header-anchor">#</a> 3.2 Shell 变量定义</h3> <h4 id="基本语法"><a href="#基本语法" class="header-anchor">#</a> 基本语法：</h4> <ul><li>定义变量：<code>变量名=值</code> <ul><li><u>注意在 shell 编程中，这种<strong>等号的两边不要打空格</strong>。</u></li></ul></li> <li>撤销变量：<code>unset 变量</code></li> <li>声明静态变量：<code>readonly 变量</code>，注意不能 unset</li></ul> <h4 id="快速入门"><a href="#快速入门" class="header-anchor">#</a> 快速入门：</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># 案例 1：定义变量 A</span>
<span class="token assign-left variable">A</span><span class="token operator">=</span><span class="token number">100</span>
<span class="token comment"># 输出变量需要加上 $</span>
<span class="token builtin class-name">echo</span> <span class="token assign-left variable">A</span><span class="token operator">=</span><span class="token variable">$A</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;A=<span class="token variable">$A</span>&quot;</span>
<span class="token comment"># 案例 2：撤销变量 A</span>
<span class="token builtin class-name">unset</span> A
<span class="token builtin class-name">echo</span> <span class="token string">&quot;A=<span class="token variable">$A</span>&quot;</span>
<span class="token comment"># 案例 3：声明静态的变量 B=2，不能撤销</span>
<span class="token builtin class-name">readonly</span> <span class="token assign-left variable">B</span><span class="token operator">=</span><span class="token number">2</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;B=<span class="token variable">$B</span>&quot;</span>
<span class="token comment"># 此时如果 unset B，执行时会报错</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>vim 中临时显示行号：<code>:nu</code>
vim 中显示行号：<code>:set nu</code></p> <h4 id="补充-shell-脚本的注释"><a href="#补充-shell-脚本的注释" class="header-anchor">#</a> 补充：shell 脚本的注释：</h4> <ul><li>单行注释：<code>#</code></li> <li>多行注释：</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>:<span class="token operator">&lt;&lt;</span><span class="token operator">!</span>
需要注释的第一行内容
需要注释的第二行内容
<span class="token operator">!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_3-3-shell-变量的定义"><a href="#_3-3-shell-变量的定义" class="header-anchor">#</a> 3.3 shell 变量的定义</h3> <h4 id="定义变量的规则"><a href="#定义变量的规则" class="header-anchor">#</a> 定义变量的规则：</h4> <ul><li>变量名称可以由字母、数字和下划线组成，但是不能以数字开头。</li> <li><strong>等号两侧不能有空格</strong></li> <li>变量名称<strong>一般习惯为大写</strong>，这是一个规范，遵守即可</li></ul> <h4 id="将命令的返回值赋给变量"><a href="#将命令的返回值赋给变量" class="header-anchor">#</a> 将命令的返回值赋给变量：</h4> <ul><li>A=<code>date</code>，<strong>通过反引号</strong>，运行里面的命令，并把结果返回给变量 A</li> <li><code>A=$(date)</code> 等价于反引号</li></ul> <h3 id="_3-4-设置环境变量"><a href="#_3-4-设置环境变量" class="header-anchor">#</a> 3.4 设置环境变量</h3> <h4 id="基本语法-2"><a href="#基本语法-2" class="header-anchor">#</a> 基本语法：</h4> <ul><li><code>export 变量名=变量值</code>：将 Shell 变量输出为环境变量</li> <li><code>source 配置文件</code>：让修改后的配置文件立即生效</li> <li><code>echo $变量名</code>：查询环境变量的值</li></ul> <h4 id="快速入门-2"><a href="#快速入门-2" class="header-anchor">#</a> 快速入门：</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 通过编辑 /etc/profile 文件配置 JDK 环境变量，要增加以下命令</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/local/java/jdk1.8.0_261
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token environment constant">$PATH</span>
<span class="token comment"># 保存退出 /etc/profile 文件后，执行 source /etc/profile 命令使修改后的配置文件生效</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p><strong>在 /etc/profile 文件中设置的变量是全局变量</strong>。而 .bashrc文件（在用户的家目录下）则只对当前用户有用。~/.bashrc、~/.bash_file 是当前用户目录下的配置信息。修改后用 source 命令更新。</p></blockquote> <h3 id="_3-5-位置参数变量"><a href="#_3-5-位置参数变量" class="header-anchor">#</a> 3.5 位置参数变量</h3> <p>当我们执行一个 Shell 脚本时，如果希望<strong>获取到命令行的参数信息</strong>，就可以使用到位置参数变量，比如 <code>./myshell.sh 100 200</code> , 这个就是一个执行 shell 的命令行，可以在 myshell 脚本中获取到参数信息。</p> <h4 id="_3-5-1-基本语法"><a href="#_3-5-1-基本语法" class="header-anchor">#</a> 3.5.1 基本语法</h4> <ul><li><code>$n</code>：n 为数字，<code>$0</code> 代表命令本身，<code>$1-$9</code> 代表第一到第九个参数，十以上的参数需要用大括号，如 <code>${10}</code></li> <li><code>$*</code>：代表命令行中所有的参数，<code>$*</code> 把所有的参数看成一个整体</li> <li><code>$@</code>：代表命令行中所有的参数，不过该命令是把每个参数区分对待</li> <li><code>$#</code>：代表命令行中所有参数的个数</li></ul> <h4 id="_3-5-2-案例"><a href="#_3-5-2-案例" class="header-anchor">#</a> 3.5.2 案例</h4> <p>案例：在脚本中获取到命令行的各个参数信息</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;0=<span class="token variable">$0</span> 1=<span class="token variable">$1</span> 2=<span class="token variable">$2</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;命令行所有传入的参数=<span class="token variable">$*</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;参数的个数=<span class="token variable">$#</span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-6-预定义变量"><a href="#_3-6-预定义变量" class="header-anchor">#</a> 3.6 预定义变量</h3> <p>Shell 设计者事先已经定义好的变量，可以直接在 Shell 脚本中使用。<em><u>不常用</u></em>。</p> <h4 id="_3-6-1-基本语法"><a href="#_3-6-1-基本语法" class="header-anchor">#</a> 3.6.1 基本语法</h4> <ul><li><code>$$</code>：当前进程的进程号</li> <li><code>$!</code>：后台运行的最后一个进程的进程号</li> <li><code>$?</code>：最后一次执行的命令的返回状态。如果这个变量的值为 0，证明上一个命令正确执行；如果这个变量的值为非 0（具体是哪个数，由命令自己来决定），则证明上一个命令执行不正确</li></ul> <h4 id="_3-6-2-案例"><a href="#_3-6-2-案例" class="header-anchor">#</a> 3.6.2 案例</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;当前进程号=<span class="token variable">$$</span>&quot;</span>
<span class="token comment"># 后台方式运行 myShell.sh</span>
./myShell.sh <span class="token operator">&amp;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;最后的的进程号=<span class="token variable">$!</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;执行的值=<span class="token variable">$?</span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_4-运算符"><a href="#_4-运算符" class="header-anchor">#</a> 4. 运算符</h2> <p>在 Shell 中进行各种运算操作。</p> <h4 id="_4-1-基本语法"><a href="#_4-1-基本语法" class="header-anchor">#</a> 4.1 基本语法</h4> <ul><li><code>$((运算式))</code> 或 <code>$[运算式]</code></li> <li>或 <code>expr m + n</code>。注意 expr 运算符间要有空格 <u>[推荐使用]</u> <ul><li>如果希望将 expr 的结果赋给某个变量，使用反引号 `` 将它们包围起来。</li></ul></li> <li><code>expr \*，/， %</code>  分别代表乘，除，取余
<ul><li>注意在使用 expr 时乘法前面有个转义符：<code>\*</code></li></ul></li></ul> <h4 id="_4-2-案例"><a href="#_4-2-案例" class="header-anchor">#</a> 4.2 案例</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># 案例1：计算（2+3）X4 的值</span>
<span class="token comment"># 使用第一种方式</span>
<span class="token assign-left variable">RES1</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">4</span><span class="token variable">))</span></span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;res1=<span class="token variable">$RES1</span>&quot;</span>
<span class="token comment"># 使用第二种方式（推荐）</span>
<span class="token assign-left variable">RES2</span><span class="token operator">=</span>$<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token number">2</span>+3<span class="token punctuation">)</span>*4<span class="token punctuation">]</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;res2=<span class="token variable">$RES2</span>&quot;</span>
<span class="token comment"># 使用第三种方式（较为复杂）</span>
<span class="token assign-left variable">TEMP</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> <span class="token number">2</span> + <span class="token number">3</span><span class="token variable">`</span></span>
<span class="token assign-left variable">RES3</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $TEMP <span class="token punctuation">\</span>* <span class="token number">4</span><span class="token variable">`</span></span> 
<span class="token builtin class-name">echo</span> <span class="token string">&quot;temp=<span class="token variable">$TEMP</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;res3=<span class="token variable">$RES3</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;执行的值=<span class="token variable">$?</span>&quot;</span>
<span class="token comment"># 案例2：请求出命令行的两个参数[整数]的和</span>
<span class="token assign-left variable">SUM</span><span class="token operator">=</span>$<span class="token punctuation">[</span><span class="token variable">$1</span>+<span class="token variable">$2</span><span class="token punctuation">]</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;sum=<span class="token variable">$SUM</span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="_5-条件判断"><a href="#_5-条件判断" class="header-anchor">#</a> 5. 条件判断</h2> <h4 id="_5-1-基本语法"><a href="#_5-1-基本语法" class="header-anchor">#</a> 5.1 基本语法</h4> <p><code>[ condition ]</code> （注意 condition 前后要有空格），非空返回 true，可使用 <code>$?</code> 验证（0 为 true，&gt;1 为 false）</p> <h4 id="_5-2-常用判断条件"><a href="#_5-2-常用判断条件" class="header-anchor">#</a> 5.2 常用判断条件</h4> <p>1）<code>=</code>：字符串是否相等</p> <p>2）两个整数的比较</p> <table><thead><tr><th style="text-align:center;">选项</th> <th style="text-align:center;">含义</th></tr></thead> <tbody><tr><td style="text-align:center;">-lt</td> <td style="text-align:center;">小于</td></tr> <tr><td style="text-align:center;">-le</td> <td style="text-align:center;">小于等于</td></tr> <tr><td style="text-align:center;">-eq</td> <td style="text-align:center;">等于</td></tr> <tr><td style="text-align:center;">-gt</td> <td style="text-align:center;">大于</td></tr> <tr><td style="text-align:center;">-ge</td> <td style="text-align:center;">大于等于</td></tr> <tr><td style="text-align:center;">-ne</td> <td style="text-align:center;">不等于</td></tr></tbody></table> <p>3）按照文件权限进行判断</p> <table><thead><tr><th style="text-align:center;">选项</th> <th style="text-align:center;">含义</th></tr></thead> <tbody><tr><td style="text-align:center;">-r</td> <td style="text-align:center;">有读的权限</td></tr> <tr><td style="text-align:center;">-w</td> <td style="text-align:center;">有写的权限</td></tr> <tr><td style="text-align:center;">-x</td> <td style="text-align:center;">有执行的权限</td></tr></tbody></table> <p>4）按照文件类型进行判断</p> <table><thead><tr><th style="text-align:center;">选项</th> <th style="text-align:center;">含义</th></tr></thead> <tbody><tr><td style="text-align:center;">-f</td> <td style="text-align:center;">文件存在并且是一个常规的文件</td></tr> <tr><td style="text-align:center;">-e</td> <td style="text-align:center;">文件存在</td></tr> <tr><td style="text-align:center;">-d</td> <td style="text-align:center;">文件存在并是一个目录</td></tr></tbody></table> <ul><li>注意使用时，这些 <code>-</code> 不能丢。</li></ul> <h4 id="_3-8-3-案例"><a href="#_3-8-3-案例" class="header-anchor">#</a> 3.8.3 案例</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># 案例1：“ok”是否等于“ok”</span>
<span class="token comment"># 判断语句：是否 =</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">&quot;ok&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;ok&quot;</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;equal&quot;</span>
<span class="token keyword">fi</span>
<span class="token comment"># 案例2：23是否大于等于22</span>
<span class="token comment"># 判断语句：使用 -ge</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token number">23</span> <span class="token parameter variable">-ge</span> <span class="token number">22</span> <span class="token punctuation">]</span> 
<span class="token keyword">then</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;大于&quot;</span>
<span class="token keyword">fi</span>
<span class="token comment"># 案例3：/root/shcode/aaa.txt 目录中的文件是否存在</span>
<span class="token comment"># 判断语句：使用 -f</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> /root/shcode/aaa.txt <span class="token punctuation">]</span>
<span class="token keyword">then</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;存在&quot;</span>
<span class="token keyword">fi</span>
<span class="token comment"># 其他案例</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> edu <span class="token punctuation">]</span>
<span class="token keyword">then</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;hello, edu&quot;</span>
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="_6-流程控制"><a href="#_6-流程控制" class="header-anchor">#</a> 6. 流程控制</h2> <h3 id="_6-1-if-判断"><a href="#_6-1-if-判断" class="header-anchor">#</a> 6.1 if 判断</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token keyword">if</span> <span class="token punctuation">[</span> 条件判断式 <span class="token punctuation">]</span>
<span class="token keyword">then</span>
      程序
<span class="token keyword">elif</span> <span class="token punctuation">[</span> 条件判断式 <span class="token punctuation">]</span>
<span class="token keyword">then</span>
      程序
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><strong>注意</strong>：<code>[ 条件判断式 ]</code> 中括号和条件判断式之间必须有空格，if 与 [ 之间也有空格。</li></ul> <p>For example：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># 案例：编写一个 Shell 程序，如果输入的参数，大于等于60，则输出“及格了”，如果小于60，则输出 “不及格”</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$1</span> <span class="token parameter variable">-ge</span> <span class="token number">60</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;及格了&quot;</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token variable">$1</span> <span class="token parameter variable">-lt</span> <span class="token number">60</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;不及格&quot;</span>
<span class="token keyword">fi</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_6-2-case-语句"><a href="#_6-2-case-语句" class="header-anchor">#</a> 6.2 case 语句</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token keyword">case</span> $变量名 <span class="token keyword">in</span>
<span class="token string">&quot;值 1&quot;</span><span class="token punctuation">)</span>
      如果变量的值等于值 <span class="token number">1</span>，则执行程序 <span class="token number">1</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token string">&quot;值 2&quot;</span><span class="token punctuation">)</span>
      如果变量的值等于值 <span class="token number">2</span>，则执行程序 <span class="token number">2</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
      <span class="token punctuation">..</span>.省略其他分支<span class="token punctuation">..</span>.
*<span class="token punctuation">)</span>
      如果变量的值都不是以上的值，则执行此程序 
<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><p>也许 Shell 程序看起来比较诡异，但当初设计者就是这么设计的，我们也只需要承认即可。</p></blockquote> <p>For Example：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># 案例：当命令行参数是1时，输出“周一”，是2时，就输出“周二”，其它情况输出“other”</span>
<span class="token keyword">case</span> <span class="token variable">$1</span> <span class="token keyword">in</span>
<span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;周一&quot;</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;周二&quot;</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
*<span class="token punctuation">)</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;other&quot;</span> 
<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_6-3-for-循环"><a href="#_6-3-for-循环" class="header-anchor">#</a> 6.3 for 循环</h3> <h3 id="🖊-基本语法-1"><a href="#🖊-基本语法-1" class="header-anchor">#</a> 🖊 基本语法 1</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token keyword">for</span> 变量 <span class="token keyword">in</span> 值1 值2 值3 <span class="token punctuation">..</span>.
<span class="token keyword">do</span>
      程序
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>For Example：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># 案例：打印命令行输入的参数【可以看出 $* 和 $@ 的区别】</span>
<span class="token comment"># 注意 $* 是把输入的参数，当作一个整体，所以只会输出一行</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">$*</span>&quot;</span>
<span class="token keyword">do</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;num is <span class="token variable">$i</span>&quot;</span>
<span class="token keyword">done</span>
<span class="token comment"># 使用 $@ 是把输入的参数，分别对待，所以有几个参数，就会输出几行</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">j</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
<span class="token keyword">do</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;num is <span class="token variable">$j</span>&quot;</span>
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>从此案例可以看出 <code>$*</code> 和 <code>$@</code> 的区别</li></ul> <h4 id="🖊-基本语法-2"><a href="#🖊-基本语法-2" class="header-anchor">#</a> 🖊 基本语法 2</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span> 初始值<span class="token punctuation">;</span>循环控制条件<span class="token punctuation">;</span>变量变化 <span class="token punctuation">))</span></span>
<span class="token keyword">do</span>
      程序
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>1
2
3
4</p> <p>For Example：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># 案例：从1加到100的值输出显示</span>
<span class="token comment"># 定义一个变量 SUM</span>
<span class="token assign-left variable">SUM</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">100</span><span class="token punctuation">;</span>i<span class="token operator">++</span> <span class="token punctuation">))</span></span>
<span class="token keyword">do</span>
      <span class="token assign-left variable">SUM</span><span class="token operator">=</span>$<span class="token punctuation">[</span><span class="token variable">$SUM</span>+i<span class="token punctuation">]</span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;总和SUM=<span class="token variable">$SUM</span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_6-4-while-循环"><a href="#_6-4-while-循环" class="header-anchor">#</a> 6.4 while 循环</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token keyword">while</span> <span class="token punctuation">[</span> 条件判断式 <span class="token punctuation">]</span>
<span class="token keyword">do</span>
      程序
<span class="token keyword">done</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>注意：<code>[ 条件判断式 ]</code> 中括号和条件判断式之间必须有空格，while 与 [ 之间也有空格</li></ul> <p>For Example：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># 案例：从命令行输入一个数 n，统计从 1+...+ n 的值</span>
<span class="token assign-left variable">SUM</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$i</span> <span class="token parameter variable">-le</span> <span class="token variable">$1</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
      <span class="token assign-left variable">SUM</span><span class="token operator">=</span>$<span class="token punctuation">[</span><span class="token variable">$i</span>+<span class="token variable">$SUM</span><span class="token punctuation">]</span>
      <span class="token assign-left variable">i</span><span class="token operator">=</span>$<span class="token punctuation">[</span><span class="token variable">$i</span>+1<span class="token punctuation">]</span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;总和SUM=<span class="token variable">$SUM</span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_7-read-读取控制台输入"><a href="#_7-read-读取控制台输入" class="header-anchor">#</a> 7. read 读取控制台输入</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>read [选项] [参数]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>-p：指定读取值时的提示符；</li> <li>-t：指定读取值时等待的时间（秒），如果没有在指定的时间内输入，就不再等待了。</li> <li>参数：指定读取值的变量名</li></ul> <p>For Example：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># 案例1：读取控制台输入一个 NUM1 值</span>
<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;请输入一个数NUM1=&quot;</span> NUM1
<span class="token builtin class-name">echo</span> <span class="token string">&quot;您输入数NUM1=<span class="token variable">$NUM1</span>&quot;</span>
<span class="token comment"># 案例2：读取控制台输入一个 NUM2 值，在 10 秒内输入</span>
<span class="token builtin class-name">read</span> <span class="token parameter variable">-t</span> <span class="token number">10</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;请输入一个数NUM2=&quot;</span> NUM2
<span class="token builtin class-name">echo</span> <span class="token string">&quot;您输入数NUM2=<span class="token variable">$NUM2</span>&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_8-函数"><a href="#_8-函数" class="header-anchor">#</a> 8. 函数</h2> <p>shell 编程有系统函数，也可以自定义函数。</p> <h3 id="_8-1-系统函数"><a href="#_8-1-系统函数" class="header-anchor">#</a> 8.1 系统函数</h3> <p>这里只抛砖引玉地介绍两个系统函数</p> <h4 id="_8-1-1-basename-函数"><a href="#_8-1-1-basename-函数" class="header-anchor">#</a> 8.1.1 basename 函数</h4> <p>功能：返回完整路径最后 / 的部分，常用于获取文件名</p> <ul><li><code>basename [pathname] [suffix]</code></li> <li><code>basename [string] [suffix]</code>：会删掉所有的前缀包括最后一个（‘/’）字符，然后将字符串显示出来。</li></ul> <p>选项：suffix 为后缀，如果 suffix 被指定了，basename 会将 pathname 或 string 中的 suffix 去掉。</p> <blockquote><p>案例：请返回 /home/aaa/test.txt 的 test.txt 部分</p> <ul><li><code>basename /home/aaa/test.txt</code></li> <li>如果我们指定后缀 suffix，即 <code>basename /home/aaa/test.txt .txt</code>，那么显示的只有 <code>test</code></li></ul></blockquote> <h4 id="_8-1-2-dirname-函数"><a href="#_8-1-2-dirname-函数" class="header-anchor">#</a> 8.1.2 dirname 函数</h4> <p>功能：返回完整路径最后 / 的前面的部分，常用于返回路径部分。</p> <ul><li><code>dirname 文件绝对路径</code>：从给定的包含绝对路径的文件名中去除文件名（非目录的部分），然后返回剩下的路径（目录的部分）。</li></ul> <blockquote><p>案例：请返回 /home/aaa/test.txt 的 /home/aaa 部分</p> <ul><li><code>dirname /home/aaa/test.txt</code></li></ul></blockquote> <h3 id="_8-2-自定义函数"><a href="#_8-2-自定义函数" class="header-anchor">#</a> 8.2 自定义函数</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span> <span class="token keyword">function</span> <span class="token punctuation">]</span> funname<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">{</span>
      Action<span class="token punctuation">;</span>
      <span class="token punctuation">[</span>return int<span class="token punctuation">;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>调用直接写函数名：<code>funname [值]</code></p> <p>For Example：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># 案例1：计算输入两个参数的和（动态获取），getSum</span>
<span class="token comment"># 定义函数 getSum</span>
<span class="token keyword">function</span> <span class="token function-name function">getSum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
      <span class="token assign-left variable">SUM</span><span class="token operator">=</span>$<span class="token punctuation">[</span><span class="token variable">$NUM1</span>+<span class="token variable">$NUM2</span><span class="token punctuation">]</span> 
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;和是=<span class="token variable">$SUM</span>&quot;</span>
<span class="token punctuation">}</span>
<span class="token comment"># 输入两个值</span>
<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;请输入一个数NUM1=&quot;</span> NUM1
<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;请输入一个数NUM2=&quot;</span> NUM2
<span class="token comment"># 调用自定义函数</span>
getSum <span class="token variable">$NUM1</span> <span class="token variable">$NUM2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><p>可以看出，shell 编程与我们常用的编程语言还是不太一样的，既然学了就看开一点。</p></blockquote> <h2 id="_9-综合案例"><a href="#_9-综合案例" class="header-anchor">#</a> 9. 综合案例</h2> <p>需求：</p> <ul><li>每天凌晨2:10，备份数据库 hspedu 到 /data/backup/db</li> <li>备份开始和备份结束能够给出相应的提示信息</li> <li>备份后的文件要求以备份时间为文件名，并打包成 .tar.gz 的形式，比如：2018-03-12_230201.tar.gz</li> <li>在备份的同时，检查是否有 10 天前备份的数据库文件，如果有就将其删除。</li> <li>编写一个 Shell 脚本。</li></ul> <p>shell 脚本：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment">#完成数据库的定时备份</span>
<span class="token comment">#备份的路径</span>
<span class="token assign-left variable">BACKUP</span><span class="token operator">=</span>/data/backup/db
<span class="token comment">#当前的时间作为文件名</span>
<span class="token assign-left variable">DATETIME</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y-%m-%d_%H%M%S<span class="token variable">)</span></span>
<span class="token comment">#可以输出变量调试</span>
<span class="token comment">#echo ${DATETIME}</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;======================开始备份==========================&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;========备份的路径为 <span class="token variable">$BACKUP</span>/<span class="token variable">$DATETIME</span>.tar.gz ==========&quot;</span>
<span class="token comment">#数据库地址</span>
<span class="token assign-left variable">HOST</span><span class="token operator">=</span>localhost
<span class="token comment">#数据库用户名</span>
<span class="token assign-left variable">DB_USER</span><span class="token operator">=</span>root
<span class="token comment">#数据库密码</span>
<span class="token assign-left variable">DB_PW</span><span class="token operator">=</span>root
<span class="token comment">#备份数据库名</span>
<span class="token assign-left variable">DATABASE</span><span class="token operator">=</span>hspedu
<span class="token comment">#创建备份的文件夹</span>
<span class="token comment">#如果该备份的文件夹有则使用，没有就重新创建一个。</span>
<span class="token comment">#-p：表示递归创建目录，或者说创建多级目录。</span>
<span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-d</span> <span class="token string">&quot;<span class="token variable">${BACKUP}</span>/<span class="token variable">${DATETIME}</span>&quot;</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;<span class="token variable">${BACKUP}</span>/<span class="token variable">${DATETIME}</span>&quot;</span>
<span class="token comment">#执行 MySQL 备份数据库的指令</span>
mysqldump -u<span class="token variable">${DB_USER}</span> -p<span class="token variable">${DB_PW}</span> <span class="token parameter variable">--host</span><span class="token operator">=</span><span class="token variable">${HOST}</span> <span class="token variable">${DATABASE}</span> <span class="token operator">|</span> <span class="token function">gzip</span> <span class="token operator">&gt;</span> <span class="token variable">${BACKUP}</span>/<span class="token variable">${DATETIME}</span>/<span class="token variable">$DATETIME</span>.sql.gz
<span class="token comment">#将文件处理成 tar.gz</span>
<span class="token builtin class-name">cd</span> <span class="token variable">${BACKUP}</span>
<span class="token function">tar</span> <span class="token parameter variable">-zcvf</span> <span class="token variable">$DATETIME</span>.tar.gz <span class="token variable">${DATETIME}</span>
<span class="token comment"># 删除对应的备份目录</span>
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${BACKUP}</span>/<span class="token variable">${DATETIME}</span>
<span class="token comment">#删除10天前的备份文件</span>
<span class="token function">find</span> <span class="token variable">${BACKUP}</span> <span class="token parameter variable">-atime</span> +10 <span class="token parameter variable">-name</span> <span class="token string">&quot;*.tar.gz&quot;</span> <span class="token parameter variable">-exec</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">\</span><span class="token punctuation">;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;=====================备份文件成功=========================&quot;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>运行 crontab -e 指令，增加下面命令（结尾光标要停留在 h 上），用于定时调用上面的 Shell 脚本：</p> <div class="language-text line-numbers-mode"><pre class="language-text"><code>10 2 * * * /usr/sbin/mysql_db_backup.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/n7301/blog/edit/master/docs/基础/10.Linux/05.韩顺平2021课程笔记/25.大数据定制篇-Shell编程.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/08/22, 08:23:58</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/blog/pages/1e98d9/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">JavaEE与Python定制篇</div></a> <a href="/blog/pages/dd2e0e/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">带你实现Linux命令自由</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/pages/1e98d9/" class="prev">JavaEE与Python定制篇</a></span> <span class="next"><a href="/blog/pages/dd2e0e/">带你实现Linux命令自由</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/blog/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/blog/pages/c0d84b/"><div>
            YAML、Pod、Job、CronJob、ConfigMap、Secret
            <!----></div></a> <span class="date">06-06</span></dt></dl><dl><dd>02</dd> <dt><a href="/blog/pages/757154/"><div>
            Kubernetes 的安装与基本架构
            <!----></div></a> <span class="date">06-04</span></dt></dl><dl><dd>03</dd> <dt><a href="/blog/pages/1cc8db/"><div>
            初识容器
            <!----></div></a> <span class="date">05-30</span></dt></dl> <dl><dd></dd> <dt><a href="/blog/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/Nrich-sunny" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2023
    <span>Nrich | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/blog/assets/js/app.73302609.js" defer></script><script src="/blog/assets/js/2.c02cd514.js" defer></script><script src="/blog/assets/js/52.063ad237.js" defer></script>
  </body>
</html>
