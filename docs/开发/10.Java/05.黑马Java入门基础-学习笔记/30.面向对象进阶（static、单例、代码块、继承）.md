---
title: 面向对象进阶（static、单例、代码块、继承）
date: 2023-02-24 09:46:01
permalink: /pages/46cfbb/
categories:
  - 开发
  - Java
  - 黑马Java入门基础-学习笔记
tags:
  - 
---

# 面向对象进阶（static、单例、代码块、继承）

## 1. static 关键字

### 1.1 static 是什么、修饰成员变量和成员方法的用法

#### 1.1.1 static 是什么

- static 是静态的意思，可用来修饰成员变量和成员方法

- static 修饰成员变量表示该成员变量只在内存中只存储一份，可以被共享访问、修改。

#### 1.1.2 成员变量

成员变量可以分为2类：

- 静态成员变量

  - 有 static 修饰，属于类，内存中加载一次

  - 常表示如在线人数信息、等需要被共享的信息，可以被共享访问

  - 示例代码

    ```java
    public class User {
        // 静态成员变量
        public static String onlineNumber= 161;
    }
    ```

  - 访问格式：<u>推荐使用 `类名.静态成员变量`</u>，不推荐 `对象.静态成员变量`

- 实例成员变量

  - 无static修饰，存在于每个对象中
  - 常表示姓名name、年龄age、等属于每个对象的信息。属于每个对象，且每个对象的信息不同
  - 访问格式：<u>`对象.实例成员变量`</u>

#### 1.1.3 成员方法

成员方法可以分为2类：

- 静态成员方法
  - 有 static 修饰，属于类
  - 使用场景：如果该方法是以执行一个共用功能为目的，则可以申明成静态方法
  - 访问：<u>建议用类名访问</u>，也可以用对象访问。`类名.静态成员方法`
- 实例成员方法
  - 无 static 修饰，属于对象
  - 使用场景：表示对象自己的行为的，且方法中需要访问实例成员的，则该方法必须申明成实例方法
  - 访问：<u>只能用对象触发访问</u>

### 1.2 static 修饰成员变量的内存原理

在加载一个类时，会先将此类加载到方法区，同时会在堆内存中开辟一块此类的静态变量区

-> 然后将 main 方法加载进栈内存运行

注：此时内存中还没有 name、age 实例成员变量，因为他们是属于对象的

![image-20230224105808538](https://blog-1310567564.cos.ap-beijing.myqcloud.com/img/image-20230224105808538.png)



-> 在创建对象时，才在堆内存中开辟一个新的空间出来。

![image-20230224110029735](https://blog-1310567564.cos.ap-beijing.myqcloud.com/img/image-20230224110029735.png)



-> 有新的对象创建时，在堆内存中开辟另一个空间表示此对象。

![image-20230224110133132](https://blog-1310567564.cos.ap-beijing.myqcloud.com/img/image-20230224110133132.png)

::: tip 

同一个类中访问静态成员变量时，类名可以省略不写。

:::

### 1.3 static 修饰成员方法的内存原理

在初始加载类时，便会将该类的静态方法同时加载到内存的方法区中，<font color="#dd0000">但实例成员方法此时还不会加载进来</font>。
执行图中的 getMax 方法时，将该方法提到栈内存中运行，输出结果之后进行下一步。

![image-20230224110821618](https://blog-1310567564.cos.ap-beijing.myqcloud.com/img/image-20230224110821618.png)



->  创建一个对象之后，在堆内存中开辟空间，并将实例成员方法 study 加载入方法区，在对象中指向对相应静态方法和该实例方法的引用。

![image-20230224111345867](https://blog-1310567564.cos.ap-beijing.myqcloud.com/img/image-20230224111345867.png)

### 1.4 static 访问的注意事项

- 静态方法只能访问静态的成员，不可以**直接**访问实例成员。
  - 只是不能直接在一个静态方法中访问实例成员变量，但可以先在此方法中先创建一个实例成员变量，然后访问其变量。
  - 同时也不能直接访问实例成员方法。

- 实例方法可以访问静态的成员，也可以访问实例成员。

- 静态方法中是不可以出现 this 关键字的。
  - 因为 this 代表当前对象，但是静态方法可以不通过对象来调用。

## 2. static 应用知识——工具类

### 2.1 什么是工具类

工具类中定义的都是一些静态方法，每个方法都是以完成一个共用的功能为目的。

比如：一个系统的很多部分都需要生成验证码，此时可以开发一个生成验证码的静态方法。

#### 2.2 工具类的好处

- 调用方便
- 提高了代码复用（一次编写，处处可用）

### 2.3 为什么工具类中的方法不用实例方法做？

实例方法需要创建对象调用，此时用对象只是为了调用方法，这样只会浪费内存。

### 2.4 工具类定义时的其他要求（锦上添花）

- 工具类中都是静态方法，直接用类名访问即可。
- 工具类无需创建对象，建议将工具类的构造器进行私有化。（用 private 阉割掉）



## 3. 设计模式：单例







## 4. 面向对象三大特征：继承
